{% extends "base.html" %}
{% block title %}My Recommendations - DialSmart{% endblock %}
{% block content %}
<div class="container py-4">
    <h2>AI Recommendations For You</h2>
    <div class="row mt-4">
        {% for rec in recommendations %}
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                {% if rec['phone'].main_image and rec['phone'].main_image != 'None' and rec['phone'].main_image != '' %}
                <img src="{{ rec['phone'].main_image }}" class="card-img-top" alt="{{ rec['phone'].model_name }}" style="height: 250px; object-fit: cover;" onerror="this.src='https://via.placeholder.com/400x250/e0e0e0/666666?text={{ rec['phone'].model_name | urlencode }}'">
                {% else %}
                <img src="https://via.placeholder.com/400x250/e0e0e0/666666?text={{ rec['phone'].model_name | urlencode }}" class="card-img-top" alt="{{ rec['phone'].model_name }}" style="height: 250px; object-fit: cover;">
                {% endif %}
                <div class="card-body">
                    <h5>{{ rec['phone'].model_name }}</h5>
                    <p class="text-primary mb-2">RM {{ "{:,.0f}".format(rec['phone'].price) }}</p>
                    <span class="badge bg-success mb-2">{{ rec['match_score'] }}% Match</span>
                    <p class="small mt-2">{{ rec['reasoning'][:100] }}...</p>
                    <a href="{{ url_for('phone.details', phone_id=rec['phone'].id) }}" class="btn btn-sm btn-primary">View Details</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
