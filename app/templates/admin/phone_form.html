{% extends "base.html" %}
{% block title %}{% if phone %}Edit{% else %}Add{% endif %} Phone - Admin{% endblock %}
{% block content %}
<div class="container-fluid py-4">
    <h2>{% if phone %}Edit{% else %}Add New{% endif %} Phone</h2>
    <p class="text-muted">Fields marked with * are required. All other fields are optional.</p>

    <form method="POST" enctype="multipart/form-data">
        <div class="row">
            <!-- Basic Information -->
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white"><h5>Basic Information</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Model Name *</label>
                            <input type="text" name="model_name" class="form-control" value="{{ phone.model_name if phone else '' }}" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Brand *</label>
                            <select name="brand_id" class="form-select" required>
                                {% for brand in brands %}
                                <option value="{{ brand.id }}" {% if phone and phone.brand_id == brand.id %}selected{% endif %}>{{ brand.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Price (RM) *</label>
                            <input type="number" name="price" step="0.01" class="form-control" value="{{ phone.price if phone else '' }}" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Model Number</label>
                            <input type="text" name="model_number" class="form-control" value="{{ phone.model_number if phone else '' }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select name="availability_status" class="form-select">
                                <option value="Available" {% if phone and phone.availability_status == 'Available' %}selected{% endif %}>Available</option>
                                <option value="Out of Stock" {% if phone and phone.availability_status == 'Out of Stock' %}selected{% endif %}>Out of Stock</option>
                                <option value="Pre-order" {% if phone and phone.availability_status == 'Pre-order' %}selected{% endif %}>Pre-order</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Release Date</label>
                            <input type="date" name="release_date" class="form-control" value="{{ phone.release_date if phone and phone.release_date else '' }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Image URL</label>
                            <input type="url" name="main_image" class="form-control" value="{{ phone.main_image if phone else '' }}" placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Product URL</label>
                            <input type="text" name="product_url" class="form-control" value="{{ specs.product_url if specs else '' }}" placeholder="https://example.com/product or leave empty">
                            <small class="text-muted">Optional - Enter a URL or leave empty/type 'None'</small>
                        </div>
                    </div>
                </div>

                <!-- Physical Characteristics -->
                <div class="card mb-4">
                    <div class="card-header bg-secondary text-white"><h5>Physical Characteristics</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Dimensions</label>
                            <input type="text" name="dimensions" class="form-control" value="{{ specs.dimensions if specs else '' }}" placeholder="160.5 x 74.8 x 8.4 mm">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Weight</label>
                            <input type="text" name="weight" class="form-control" value="{{ specs.weight if specs else '' }}" placeholder="180 g">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Colors Available</label>
                            <input type="text" name="colors_available" class="form-control" value="{{ specs.colors_available if specs else '' }}" placeholder="Black, White, Blue">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Body Material</label>
                            <input type="text" name="body_material" class="form-control" value="{{ specs.body_material if specs else '' }}" placeholder="Glass front, plastic back">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Display -->
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header bg-info text-white"><h5>Display</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Screen Size (inches)</label>
                            <input type="number" name="screen_size" step="0.1" class="form-control" value="{{ specs.screen_size if specs else '' }}" placeholder="6.5">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Screen Type</label>
                            <input type="text" name="screen_type" class="form-control" value="{{ specs.screen_type if specs else '' }}" placeholder="AMOLED">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Display Type</label>
                            <input type="text" name="display_type" class="form-control" value="{{ specs.display_type if specs else '' }}" placeholder="Super AMOLED, 120Hz">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Screen Resolution</label>
                            <input type="text" name="screen_resolution" class="form-control" value="{{ specs.screen_resolution if specs else '' }}" placeholder="1080 x 2400 pixels">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">PPI</label>
                            <input type="number" name="ppi" class="form-control" value="{{ specs.ppi if specs else '' }}" placeholder="400">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Refresh Rate (Hz)</label>
                            <input type="number" name="refresh_rate" class="form-control" value="{{ specs.refresh_rate if specs else '' }}" placeholder="120">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Multi-touch</label>
                            <input type="text" name="multitouch" class="form-control" value="{{ specs.multitouch if specs else '' }}" placeholder="Yes">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Protection</label>
                            <input type="text" name="protection" class="form-control" value="{{ specs.protection if specs else '' }}" placeholder="Gorilla Glass Victus">
                        </div>
                    </div>
                </div>

                <!-- Performance -->
                <div class="card mb-4">
                    <div class="card-header bg-warning text-dark"><h5>Performance</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Chipset</label>
                            <input type="text" name="chipset" class="form-control" value="{{ specs.chipset if specs else '' }}" placeholder="Snapdragon 888">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Processor</label>
                            <input type="text" name="processor" class="form-control" value="{{ specs.processor if specs else '' }}" placeholder="Snapdragon 888">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">CPU</label>
                            <input type="text" name="cpu" class="form-control" value="{{ specs.cpu if specs else '' }}" placeholder="Octa-core (1x2.84 GHz)">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">GPU</label>
                            <input type="text" name="gpu" class="form-control" value="{{ specs.gpu if specs else '' }}" placeholder="Adreno 660">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">RAM Options</label>
                            <input type="text" name="ram_options" class="form-control" value="{{ specs.ram_options if specs else '' }}" placeholder="8GB / 12GB">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Storage Options</label>
                            <input type="text" name="storage_options" class="form-control" value="{{ specs.storage_options if specs else '' }}" placeholder="128GB / 256GB">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Card Slot</label>
                            <input type="text" name="card_slot" class="form-control" value="{{ specs.card_slot if specs else '' }}" placeholder="microSDXC">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Operating System</label>
                            <input type="text" name="operating_system" class="form-control" value="{{ specs.operating_system if specs else '' }}" placeholder="Android 13">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Camera Section (Full Width) -->
        <div class="row">
            <div class="col-md-12">
                <div class="card mb-4">
                    <div class="card-header bg-success text-white"><h5>Camera</h5></div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-success">Rear Camera</h6>
                                <div class="mb-3">
                                    <label class="form-label">Rear Camera Full Specs</label>
                                    <textarea name="rear_camera" class="form-control" rows="3" placeholder="50 MP, f/1.8, (wide), PDAF
12 MP, f/2.2, (ultrawide)
2 MP, f/2.4, (macro)">{{ specs.rear_camera if specs else '' }}</textarea>
                                    <small class="text-muted">Enter each camera on a new line</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Rear Camera Main (MP)</label>
                                    <input type="number" name="rear_camera_main" class="form-control" value="{{ specs.rear_camera_main if specs else '' }}" placeholder="50">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-success">Front Camera</h6>
                                <div class="mb-3">
                                    <label class="form-label">Front Camera Full Specs</label>
                                    <textarea name="front_camera" class="form-control" rows="3" placeholder="13 MP, f/2.0, (wide)">{{ specs.front_camera if specs else '' }}</textarea>
                                    <small class="text-muted">Enter camera specifications</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Front Camera MP</label>
                                    <input type="number" name="front_camera_mp" class="form-control" value="{{ specs.front_camera_mp if specs else '' }}" placeholder="13">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Flash</label>
                                    <input type="text" name="flash" class="form-control" value="{{ specs.flash if specs else '' }}" placeholder="LED flash">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Camera Features</label>
                                    <input type="text" name="camera_features" class="form-control" value="{{ specs.camera_features if specs else '' }}" placeholder="HDR, panorama">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Video Recording</label>
                                    <input type="text" name="video_recording" class="form-control" value="{{ specs.video_recording if specs else '' }}" placeholder="4K@30fps, 1080p@60fps">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Battery & Network (Full Width) -->
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header bg-danger text-white"><h5>Battery</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Battery Description</label>
                            <input type="text" name="battery" class="form-control" value="{{ specs.battery if specs else '' }}" placeholder="5000 mAh">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Battery Capacity (mAh)</label>
                            <input type="number" name="battery_capacity" class="form-control" value="{{ specs.battery_capacity if specs else '' }}" placeholder="5000">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Fast Charging</label>
                            <input type="text" name="fast_charging" class="form-control" value="{{ specs.fast_charging if specs else '' }}" placeholder="33W fast charging">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Charging Speed</label>
                            <input type="text" name="charging_speed" class="form-control" value="{{ specs.charging_speed if specs else '' }}" placeholder="33W wired">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Wireless Charging</label>
                            <input type="text" name="wireless_charging" class="form-control" value="{{ specs.wireless_charging if specs else '' }}" placeholder="15W wireless">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Removable Battery</label>
                            <input type="text" name="removable_battery" class="form-control" value="{{ specs.removable_battery if specs else '' }}" placeholder="Non-Removable">
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white"><h5>Network</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">SIM</label>
                            <input type="text" name="sim" class="form-control" value="{{ specs.sim if specs else '' }}" placeholder="Dual SIM (Nano-SIM)">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Technology</label>
                            <input type="text" name="technology" class="form-control" value="{{ specs.technology if specs else '' }}" placeholder="GSM / HSPA / LTE / 5G">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">5G Networks</label>
                            <input type="text" name="network_5g" class="form-control" value="{{ specs.network_5g if specs else '' }}" placeholder="1, 3, 5, 7, 8, 20, 28, 77, 78">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">4G Networks</label>
                            <input type="text" name="network_4g" class="form-control" value="{{ specs.network_4g if specs else '' }}" placeholder="1, 2, 3, 4, 5, 7, 8, 12, 17, 20, 28">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">3G Networks</label>
                            <input type="text" name="network_3g" class="form-control" value="{{ specs.network_3g if specs else '' }}" placeholder="HSDPA 850 / 900 / 1900 / 2100">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">2G Networks</label>
                            <input type="text" name="network_2g" class="form-control" value="{{ specs.network_2g if specs else '' }}" placeholder="GSM 850 / 900 / 1800 / 1900">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Network Speed</label>
                            <input type="text" name="network_speed" class="form-control" value="{{ specs.network_speed if specs else '' }}" placeholder="HSPA, LTE, 5G">
                        </div>
                        <div class="form-check mb-3">
                            <input type="checkbox" name="has_5g" class="form-check-input" {% if specs and specs.has_5g %}checked{% endif %}>
                            <label class="form-check-label">5G Support</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Connectivity & Features -->
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header bg-info text-white"><h5>Connectivity</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Wi-Fi</label>
                            <input type="text" name="wifi_standard" class="form-control" value="{{ specs.wifi_standard if specs else '' }}" placeholder="Wi-Fi 802.11 a/b/g/n/ac, dual-band">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Bluetooth</label>
                            <input type="text" name="bluetooth_version" class="form-control" value="{{ specs.bluetooth_version if specs else '' }}" placeholder="5.2, A2DP, LE">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">GPS</label>
                            <input type="text" name="gps" class="form-control" value="{{ specs.gps if specs else '' }}" placeholder="Yes, with A-GPS, GLONASS">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">NFC</label>
                            <input type="text" name="nfc" class="form-control" value="{{ specs.nfc if specs else '' }}" placeholder="Yes">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">USB</label>
                            <input type="text" name="usb" class="form-control" value="{{ specs.usb if specs else '' }}" placeholder="USB Type-C 2.0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Audio Jack</label>
                            <input type="text" name="audio_jack" class="form-control" value="{{ specs.audio_jack if specs else '' }}" placeholder="3.5mm jack">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Radio</label>
                            <input type="text" name="radio" class="form-control" value="{{ specs.radio if specs else '' }}" placeholder="FM radio">
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header bg-secondary text-white"><h5>Additional Features</h5></div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Sensors</label>
                            <textarea name="sensors" class="form-control" rows="3" placeholder="Fingerprint (under display), accelerometer, gyro, proximity, compass">{{ specs.sensors if specs else '' }}</textarea>
                        </div>
                        <div class="form-check mb-3">
                            <input type="checkbox" name="fingerprint_sensor" class="form-check-input" {% if specs and specs.fingerprint_sensor %}checked{% endif %}>
                            <label class="form-check-label">Fingerprint Sensor</label>
                        </div>
                        <div class="form-check mb-3">
                            <input type="checkbox" name="face_unlock" class="form-check-input" {% if specs and specs.face_unlock %}checked{% endif %}>
                            <label class="form-check-label">Face Unlock</label>
                        </div>
                        <div class="form-check mb-3">
                            <input type="checkbox" name="dual_sim" class="form-check-input" {% if specs and specs.dual_sim %}checked{% endif %}>
                            <label class="form-check-label">Dual SIM</label>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Water Resistance</label>
                            <input type="text" name="water_resistance" class="form-control" value="{{ specs.water_resistance if specs else '' }}" placeholder="IP68">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit Buttons -->
        <div class="text-center mb-4">
            <button type="submit" class="btn btn-primary btn-lg me-2">
                <i class="bi bi-save"></i> {% if phone %}Update{% else %}Add{% endif %} Phone
            </button>
            <a href="{{ url_for('admin.phones') }}" class="btn btn-secondary btn-lg">
                <i class="bi bi-x-circle"></i> Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}
